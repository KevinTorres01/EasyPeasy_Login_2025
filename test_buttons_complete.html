<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Test UserManagement Buttons</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        button { padding: 8px 16px; margin: 5px; cursor: pointer; }
        .test-result { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
        .success { background: #d4edda; }
        .error { background: #f8d7da; }
        #log { margin-top: 20px; padding: 10px; background: #f5f5f5; min-height: 100px; }
    </style>
</head>
<body>
    <h1>üîç Test de Botones - UserManagement</h1>
    
    <div class="test-result">
        <h2>Test 1: Botones Est√°ticos</h2>
        <button data-username="static_user" onclick="openEditUserModal(this.dataset.username)">
            Edit (Static)
        </button>
        <button data-username="static_user" onclick="openDeleteModal(this.dataset.username)">
            Delete (Static)
        </button>
        <button data-username="static_user" onclick="toggleUserStatus(this.dataset.username)">
            Toggle (Static)
        </button>
    </div>

    <div class="test-result">
        <h2>Test 2: Botones Generados Din√°micamente (Simulando C#)</h2>
        <div id="dynamicButtons"></div>
    </div>

    <div class="test-result">
        <h2>Test 3: Usando Template Literal (Como en UserManagementPage.cs)</h2>
        <div id="templateButtons"></div>
    </div>

    <h2>üìã Log de Eventos</h2>
    <div id="log"></div>

    <script>
        // Funciones que deber√≠an ser llamadas
        function openEditUserModal(username) {
            log(`‚úÖ openEditUserModal llamado con: "${username}"`, 'success');
            alert(`Edit User: ${username}`);
        }

        function openDeleteModal(username) {
            log(`‚úÖ openDeleteModal llamado con: "${username}"`, 'success');
            alert(`Delete User: ${username}`);
        }

        function toggleUserStatus(username) {
            log(`‚úÖ toggleUserStatus llamado con: "${username}"`, 'success');
            alert(`Toggle User: ${username}`);
        }

        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const entry = document.createElement('div');
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            entry.style.margin = '5px 0';
            entry.style.color = type === 'success' ? 'green' : type === 'error' ? 'red' : 'black';
            logDiv.appendChild(entry);
            console.log(message);
        }

        // Test 2: Generar botones din√°micamente (simulando C#)
        const testUser = { username: "dynamic_user", name: "Dynamic User" };
        const dynamicContainer = document.getElementById('dynamicButtons');
        
        // Forma correcta usando data attributes
        dynamicContainer.innerHTML = `
            <strong>${testUser.name}</strong><br>
            <button data-username="${testUser.username}" onclick="openEditUserModal(this.dataset.username)">
                Edit (Dynamic)
            </button>
            <button data-username="${testUser.username}" onclick="openDeleteModal(this.dataset.username)">
                Delete (Dynamic)
            </button>
            <button data-username="${testUser.username}" onclick="toggleUserStatus(this.dataset.username)">
                Toggle (Dynamic)
            </button>
        `;
        log('Test 2: Botones din√°micos generados');

        // Test 3: Usando template literal completo (simulando renderUsers)
        const users = [
            { username: "template_user1", name: "Template User 1", isActive: true },
            { username: "template_user2", name: "Template User 2", isActive: false }
        ];

        const templateContainer = document.getElementById('templateButtons');
        templateContainer.innerHTML = users.map(user => `
            <div style="border: 1px solid #ccc; padding: 10px; margin: 10px 0;">
                <strong>${user.name}</strong> (${user.username}) - ${user.isActive ? 'Active' : 'Inactive'}
                <br>
                <button data-username="${user.username}" onclick="openEditUserModal(this.dataset.username)">
                    Edit (Template)
                </button>
                <button data-username="${user.username}" onclick="openDeleteModal(this.dataset.username)">
                    Delete (Template)
                </button>
                <button data-username="${user.username}" onclick="toggleUserStatus(this.dataset.username)">
                    Toggle (Template)
                </button>
            </div>
        `).join('');
        log('Test 3: Botones desde template literal generados');

        // Verificar que dataset funciona
        log('üîç Verificando data attributes...');
        setTimeout(() => {
            const allButtons = document.querySelectorAll('[data-username]');
            log(`‚úÖ Encontrados ${allButtons.length} botones con data-username`);
            allButtons.forEach((btn, i) => {
                log(`  Bot√≥n ${i + 1}: username="${btn.dataset.username}"`);
            });
        }, 100);
    </script>

    <hr style="margin-top: 30px;">
    <h2>üìù Conclusi√≥n</h2>
    <p><strong>Si todos los botones funcionan correctamente aqu√≠, entonces el c√≥digo en UserManagementPage.cs est√° correcto.</strong></p>
    <p>El problema podr√≠a estar en:</p>
    <ul>
        <li>‚ùå La conexi√≥n API no responde</li>
        <li>‚ùå Errores de JavaScript en consola del navegador</li>
        <li>‚ùå CORS bloqueado</li>
        <li>‚ùå El servidor HTTP no est√° devolviendo el HTML correctamente</li>
    </ul>
</body>
</html>
